<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>ç®¡ç†å‘˜åå°</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <nav>
    <span id="logo">ğŸ“š ç®¡ç†åå°</span>
    <div id="navContent">
      <a href="#" onclick="logout()">é€€å‡º</a>
    </div>
  </nav>

  <main style="max-width:800px;margin:30px auto;padding:2rem;background:white;border-radius:10px;">
    <h2>ç”¨æˆ·åˆ—è¡¨</h2>
    <div id="userTable"></div>
  </main>

  <script src="js/storage.js"></script>
  <script>
    if (localStorage.getItem("currentUser") !== "admin") {
      alert("ä»…ç®¡ç†å‘˜å¯è®¿é—®");
      location.href = "index.html";
    }

    const users = getUsers();
    const tableDiv = document.getElementById("userTable");

    for (let id in users) {
      const u = users[id];
      tableDiv.innerHTML += `
      <div style="border-bottom:1px solid #ccc;margin-bottom:1rem">
        <p><strong>${u.name}</strong> (${id})</p>
        <p>çŠ¶æ€ï¼š${u.banned ? 'å°ç¦' : 'æ­£å¸¸'} | ç™»å½•ï¼š${new Date(u.lastLogin).toLocaleString()}</p>
        <button onclick="ban('${id}')">${u.banned ? 'è§£é™¤å°ç¦' : 'å°ç¦ç”¨æˆ·'}</button>
        <button onclick="reset('${id}')">é‡ç½®èµ„æ–™</button>
      </div>
    `;
    }

    function ban(id) {
      users[id].banned = !users[id].banned;
      saveUsers(users);
      location.reload();
    }

    function reset(id) {
      users[id].avatar = '';
      users[id].intro = '';
      users[id].tag = [];
      saveUsers(users);
      alert("èµ„æ–™å·²é‡ç½®");
      location.reload();
    }

    // æ·»åŠ é€€å‡ºåŠŸèƒ½
    function logout() {
      localStorage.removeItem("currentUser");
      location.href = "index.html";
    }
  </script>

  <footer>
    <p>Webç¼–ç¨‹å¤§ä½œä¸šâ€”â€”<strong>ä½ è¯´å¾—é˜Ÿ</strong><br />é™ˆ&nbsp &nbspç¿ - 2023150070 &nbsp æå† éœ† - 2023150135<br />ä½•éš½çƒ¨ - 2023150134
      &nbsp é™ˆæ€å®‡ - 2023150048
    </p>
  </footer>
</body>

</html>